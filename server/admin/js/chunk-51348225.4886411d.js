(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-51348225"],{"6af0":function(e,t,a){},"8b73":function(e,t,a){"use strict";a("6af0")},f7ac:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"form",attrs:{model:e.form,size:"medium","label-width":"auto"}},[a("el-form-item",{attrs:{label:"文章标题"}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{width:"100px"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),a("el-form-item",{attrs:{label:"作者姓名"}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:e.form.userName,callback:function(t){e.$set(e.form,"userName",t)},expression:"form.userName"}})],1)],1),a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:e.form.cateName,callback:function(t){e.$set(e.form,"cateName",t)},expression:"form.cateName"}},e._l(this.categoryData,(function(e){return a("el-option",{key:e._id,attrs:{label:e.cateName,value:e.cateName}})})),1)],1),a("el-form-item",{attrs:{label:"添加标签"}},[a("el-select",{attrs:{multiple:"",filterable:"","allow-create":"",placeholder:"输入标签并选中"},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}})],1),a("el-form-item",{attrs:{label:"文章封面图"}},[a("el-col",{attrs:{span:12}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://localhost:3000/admin/api/upload","list-type":"picture",headers:e.headers,"on-success":e.SuccessUpload}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-form-item",{attrs:{label:"置顶数"}},[a("el-col",{attrs:{span:12}},[a("el-input-number",{attrs:{min:0,max:10,label:"数字越大级别越高"},model:{value:e.form.stick,callback:function(t){e.$set(e.form,"stick",t)},expression:"form.stick"}})],1)],1),a("el-form-item",{attrs:{label:"文章内容"}},[a("div",{attrs:{id:"editor"}})]),a("el-form-item",[a("button",{attrs:{id:"button"},on:{click:function(t){return t.preventDefault(),e.OnSubmit.apply(null,arguments)}}},[e._v("立即创建")])])],1)],1)},o=[],n=a("1da1"),s=(a("96cf"),a("6fad")),i=a.n(s),l=a("1487"),c=a.n(l),u={inject:["reload"],data:function(){return{headers:{Authorization:""},imageUrl:"",categoryData:[],tagValue:[],editor:null,form:{title:"",userName:"",cateName:"",stick:0,tags:[],coverPicture:"",contents:"",time:"default"}}},methods:{GetCateData:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/category");case 2:a=t.sent,e.categoryData=a.data.reverse();case 4:case"end":return t.stop()}}),t)})))()},OnSubmit:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!=e.if_obj_is_null(e.form)){t.next=12;break}for(a=[],r=0;r<e.form.tags.length;r++)a.push({tagName:e.form.tags[r]});return t.next=5,e.$http.post("/tag",a);case 5:return""===e.form.coverPicture&&(e.form.coverPicture="https://cdn.jsdelivr.net/gh/rsong404/vuepress_img@master/images/articleCover.jpg"),t.next=8,e.$http.post("/article",e.form);case 8:e.$message.success("文章发表成功！"),e.$router.push("/articleList"),t.next=13;break;case 12:e.$message.error("表格不能为空，请检查！");case 13:case"end":return t.stop()}}),t)})))()},getEditorData:function(){this.editor.txt.html()},if_obj_is_null:function(e){var t=0;for(var a in e)e.hasOwnProperty(a)&&"coverPicture"!==a&&(null!==e[a]&&""!==e[a]||t++);return t},SuccessUpload:function(e){this.imageUrl=e,this.form.coverPicture=e}},created:function(){this.GetCateData(),this.headers.Authorization=window.localStorage.token},mounted:function(){var e=this,t=new i.a("#editor");t.highlight=c.a,t.config.zIndex=0,t.config.onchangeTimeout=700,t.create(),t.config.onchange=function(t){e.form.contents=t},this.editor=t},beforeDestroy:function(){this.editor.destroy(),this.editor=null}},m=u,f=(a("8b73"),a("2877")),d=Object(f["a"])(m,r,o,!1,null,"620ec780",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-51348225.4886411d.js.map