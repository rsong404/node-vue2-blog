{"version":3,"sources":["webpack:///./src/views/article/CreateArticle.vue?ca2e","webpack:///./src/views/article/CreateArticle.vue?9e44","webpack:///src/views/article/CreateArticle.vue","webpack:///./src/views/article/CreateArticle.vue?f6ba","webpack:///./src/views/article/CreateArticle.vue?0ccf"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","form","model","value","callback","$$v","$set","expression","_l","item","key","_id","cateName","staticClass","headers","SuccessUpload","imageUrl","on","$event","preventDefault","OnSubmit","apply","arguments","_v","staticRenderFns","inject","data","Authorization","categoryData","tagValue","editor","title","userName","stick","tags","coverPicture","contents","time","methods","getEditorData","txt","html","if_obj_is_null","obj","hasOwnProperty","i","res","created","GetCateData","window","localStorage","token","mounted","highlight","config","zIndex","onchangeTimeout","create","onchange","beforeDestroy","destroy","component"],"mappings":"2IAAA,W,yCCAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,UAAU,CAACE,IAAI,OAAOC,MAAM,CAAC,MAAQP,EAAIQ,KAAK,KAAO,SAAS,cAAc,SAAS,CAACJ,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,WAAW,CAACG,MAAM,CAAC,MAAQ,SAASE,MAAM,CAACC,MAAOV,EAAIQ,KAAU,MAAEG,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIQ,KAAM,QAASI,IAAME,WAAW,iBAAiB,IAAI,GAAGV,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,WAAW,CAACK,MAAM,CAACC,MAAOV,EAAIQ,KAAa,SAAEG,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIQ,KAAM,WAAYI,IAAME,WAAW,oBAAoB,IAAI,GAAGV,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,OAAO,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,YAAc,SAASE,MAAM,CAACC,MAAOV,EAAIQ,KAAa,SAAEG,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIQ,KAAM,WAAYI,IAAME,WAAW,kBAAkBd,EAAIe,GAAId,KAAiB,cAAE,SAASe,GAAM,OAAOZ,EAAG,YAAY,CAACa,IAAID,EAAKE,IAAIX,MAAM,CAAC,MAAQS,EAAKG,SAAS,MAAQH,EAAKG,eAAc,IAAI,GAAGf,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,YAAY,CAACG,MAAM,CAAC,SAAW,GAAG,WAAa,GAAG,eAAe,GAAG,YAAc,WAAWE,MAAM,CAACC,MAAOV,EAAIQ,KAAS,KAAEG,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIQ,KAAM,OAAQI,IAAME,WAAW,gBAAgB,GAAGV,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,UAAU,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,YAAY,CAACgB,YAAY,kBAAkBb,MAAM,CAAC,OAAS,yCAAyC,YAAY,UAAU,QAAUP,EAAIqB,QAAQ,aAAarB,EAAIsB,gBAAgB,CAAEtB,EAAY,SAAEI,EAAG,MAAM,CAACgB,YAAY,SAASb,MAAM,CAAC,IAAMP,EAAIuB,YAAYnB,EAAG,IAAI,CAACgB,YAAY,yCAAyC,IAAI,GAAGhB,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,QAAQ,CAACH,EAAG,SAAS,CAACG,MAAM,CAAC,KAAO,KAAK,CAACH,EAAG,kBAAkB,CAACG,MAAM,CAAC,IAAM,EAAE,IAAM,GAAG,MAAQ,YAAYE,MAAM,CAACC,MAAOV,EAAIQ,KAAU,MAAEG,SAAS,SAAUC,GAAMZ,EAAIa,KAAKb,EAAIQ,KAAM,QAASI,IAAME,WAAW,iBAAiB,IAAI,GAAGV,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,SAAS,CAACH,EAAG,MAAM,CAACG,MAAM,CAAC,GAAK,cAAcH,EAAG,eAAe,CAACA,EAAG,SAAS,CAACG,MAAM,CAAC,GAAK,UAAUiB,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOC,iBAAwB1B,EAAI2B,SAASC,MAAM,KAAMC,cAAc,CAAC7B,EAAI8B,GAAG,aAAa,IAAI,IAChpEC,EAAkB,G,kECqEtB,GACEC,OAAQ,CAAC,UACTC,KAFF,WAGI,MAAO,CACLZ,QAAS,CACPa,cAAe,IAEjBX,SAAU,GACVY,aAAc,GACdC,SAAU,GACVC,OAAQ,KACR7B,KAAM,CACJ8B,MAAO,GACPC,SAAU,GACVpB,SAAU,GACVqB,MAAO,EACPC,KAAM,GACNC,aAAc,GACdC,SAAU,GACVC,KAAM,aAIZC,QAAS,CACP,YADJ,WACA,8KACA,yBADA,OACA,EADA,OAEA,gCAFA,8CAII,SALJ,WAKA,mKACA,4BADA,iBAIA,IADA,KACA,6BACA,iCALA,gBAOA,uBAPA,aASA,2BACA,oBACA,oFAXA,SAYA,gCAZA,OAaA,8BAEA,+BAfA,wBAiBA,gCAjBA,+CAoBIC,cAzBJ,WA2BM7C,KAAKoC,OAAOU,IAAIC,QAGlBC,eA9BJ,SA8BA,GACM,IAAN,IACM,IAAK,IAAX,OACYC,EAAIC,eAAelC,IAAgB,iBAARA,IACZ,OAAbiC,EAAIjC,IAA8B,KAAbiC,EAAIjC,IAC3BmC,KAIN,OAAOA,GAET9B,cAzCJ,SAyCA,GACMrB,KAAKsB,SAAW8B,EAChBpD,KAAKO,KAAKkC,aAAeW,IAG7BC,QArEF,WAsEIrD,KAAKsD,cACLtD,KAAKoB,QAAQa,cAAgBsB,OAAOC,aAAaC,OAEnDC,QAzEF,WAyEA,WACA,qBACItB,EAAOuB,UAAY,EAAvB,EACIvB,EAAOwB,OAAOC,OAAS,EACvBzB,EAAOwB,OAAOE,gBAAkB,IAChC1B,EAAO2B,SAEP3B,EAAOwB,OAAOI,SAAW,SAA7B,GACM,EAAN,iBAEIhE,KAAKoC,OAASA,GAEhB6B,cArFF,WAuFIjE,KAAKoC,OAAO8B,UACZlE,KAAKoC,OAAS,OC9JoV,I,wBCQlW+B,EAAY,eACd,EACArE,EACAgC,GACA,EACA,KACA,WACA,MAIa,aAAAqC,E","file":"js/chunk-51348225.4886411d.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateArticle.vue?vue&type=style&index=0&id=620ec780&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"size\":\"medium\",\"label-width\":\"auto\"}},[_c('el-form-item',{attrs:{\"label\":\"文章标题\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-input',{attrs:{\"width\":\"100px\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"作者姓名\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-input',{model:{value:(_vm.form.userName),callback:function ($$v) {_vm.$set(_vm.form, \"userName\", $$v)},expression:\"form.userName\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"分类\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择分类\"},model:{value:(_vm.form.cateName),callback:function ($$v) {_vm.$set(_vm.form, \"cateName\", $$v)},expression:\"form.cateName\"}},_vm._l((this.categoryData),function(item){return _c('el-option',{key:item._id,attrs:{\"label\":item.cateName,\"value\":item.cateName}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"添加标签\"}},[_c('el-select',{attrs:{\"multiple\":\"\",\"filterable\":\"\",\"allow-create\":\"\",\"placeholder\":\"输入标签并选中\"},model:{value:(_vm.form.tags),callback:function ($$v) {_vm.$set(_vm.form, \"tags\", $$v)},expression:\"form.tags\"}})],1),_c('el-form-item',{attrs:{\"label\":\"文章封面图\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-upload',{staticClass:\"avatar-uploader\",attrs:{\"action\":\"http://localhost:3000/admin/api/upload\",\"list-type\":\"picture\",\"headers\":_vm.headers,\"on-success\":_vm.SuccessUpload}},[(_vm.imageUrl)?_c('img',{staticClass:\"avatar\",attrs:{\"src\":_vm.imageUrl}}):_c('i',{staticClass:\"el-icon-plus avatar-uploader-icon\"})])],1)],1),_c('el-form-item',{attrs:{\"label\":\"置顶数\"}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-input-number',{attrs:{\"min\":0,\"max\":10,\"label\":\"数字越大级别越高\"},model:{value:(_vm.form.stick),callback:function ($$v) {_vm.$set(_vm.form, \"stick\", $$v)},expression:\"form.stick\"}})],1)],1),_c('el-form-item',{attrs:{\"label\":\"文章内容\"}},[_c('div',{attrs:{\"id\":\"editor\"}})]),_c('el-form-item',[_c('button',{attrs:{\"id\":\"button\"},on:{\"click\":function($event){$event.preventDefault();return _vm.OnSubmit.apply(null, arguments)}}},[_vm._v(\"立即创建\")])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-form ref=\"form\" :model=\"form\" size=\"medium\" label-width=\"auto\">\r\n      <el-form-item label=\"文章标题\">\r\n        <el-col :span=\"12\">\r\n          <el-input v-model=\"form.title\" width=\"100px\"></el-input>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"作者姓名\">\r\n        <el-col :span=\"12\">\r\n          <el-input v-model=\"form.userName\"></el-input>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"分类\">\r\n        <el-select v-model=\"form.cateName\" placeholder=\"请选择分类\">\r\n          <el-option\r\n            v-for=\"item in this.categoryData\"\r\n            :key=\"item._id\"\r\n            :label=\"item.cateName\"\r\n            :value=\"item.cateName\"\r\n          ></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"添加标签\">\r\n        <el-select\r\n          v-model=\"form.tags\"\r\n          multiple\r\n          filterable\r\n          allow-create\r\n          placeholder=\"输入标签并选中\"\r\n        >\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item label=\"文章封面图\">\r\n        <el-col :span=\"12\">\r\n          <el-upload\r\n            class=\"avatar-uploader\"\r\n            action=\"http://localhost:3000/admin/api/upload\"\r\n            list-type=\"picture\"\r\n            :headers=\"headers\"\r\n            :on-success=\"SuccessUpload\"\r\n          >\r\n            <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\r\n            <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n          </el-upload>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"置顶数\">\r\n        <el-col :span=\"12\">\r\n          <el-input-number\r\n            v-model=\"form.stick\"\r\n            :min=\"0\"\r\n            :max=\"10\"\r\n            label=\"数字越大级别越高\"\r\n          ></el-input-number>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"文章内容\">\r\n        <div id=\"editor\"></div>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <button id=\"button\" @click.prevent=\"OnSubmit\">立即创建</button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport E from \"wangeditor\";\r\nimport hljs from \"highlight.js\";\r\n\r\nexport default {\r\n  inject: [\"reload\"],\r\n  data() {\r\n    return {\r\n      headers: {\r\n        Authorization: \"\",\r\n      },\r\n      imageUrl: \"\",\r\n      categoryData: [],\r\n      tagValue: [],\r\n      editor: null,\r\n      form: {\r\n        title: \"\",\r\n        userName: \"\",\r\n        cateName: \"\",\r\n        stick: 0,\r\n        tags: [],\r\n        coverPicture: \"\",\r\n        contents: \"\",\r\n        time: \"default\",\r\n      },\r\n    };\r\n  },\r\n  methods: {\r\n    async GetCateData() {\r\n      let result = await this.$http.get(\"/category\");\r\n      this.categoryData = result.data.reverse();\r\n    },\r\n    async OnSubmit() {\r\n      if (this.if_obj_is_null(this.form) == 0) {\r\n        //向数据库添加tag\r\n        let tagList = [];\r\n        for (let index = 0; index < this.form.tags.length; index++) {\r\n          tagList.push({ tagName: this.form.tags[index] });\r\n        }\r\n        await this.$http.post(\"/tag\", tagList);\r\n        //添加文章\r\n        if (this.form.coverPicture === \"\")\r\n          this.form.coverPicture =\r\n            \"https://cdn.jsdelivr.net/gh/rsong404/vuepress_img@master/images/articleCover.jpg\";\r\n        await this.$http.post(\"/article\", this.form);\r\n        this.$message.success(\"文章发表成功！\");\r\n        //跳转到文章列表页面\r\n        this.$router.push(\"/articleList\");\r\n      } else {\r\n        this.$message.error(\"表格不能为空，请检查！\");\r\n      }\r\n    },\r\n    getEditorData() {\r\n      // 通过代码获取编辑器内容\r\n      this.editor.txt.html();\r\n    },\r\n    // 判断一个对象下是否有空属性\r\n    if_obj_is_null(obj) {\r\n      let i = 0;\r\n      for (const key in obj) {\r\n        if (obj.hasOwnProperty(key) && key !== \"coverPicture\") {\r\n          if (obj[key] === null || obj[key] === \"\") {\r\n            i++;\r\n          }\r\n        }\r\n      }\r\n      return i;\r\n    },\r\n    SuccessUpload(res) {\r\n      this.imageUrl = res;\r\n      this.form.coverPicture = res;\r\n    },\r\n  },\r\n  created() {\r\n    this.GetCateData();\r\n    this.headers.Authorization = window.localStorage.token;\r\n  },\r\n  mounted() {\r\n    const editor = new E(\"#editor\");\r\n    editor.highlight = hljs;\r\n    editor.config.zIndex = 0;\r\n    editor.config.onchangeTimeout = 700; // 修改为 500ms\r\n    editor.create();\r\n    // 配置 onchange 回调函数，将数据同步到 vue 中\r\n    editor.config.onchange = (newHtml) => {\r\n      this.form.contents = newHtml;\r\n    };\r\n    this.editor = editor;\r\n  },\r\n  beforeDestroy() {\r\n    // 调用销毁 API 对当前编辑器实例进行销毁\r\n    this.editor.destroy();\r\n    this.editor = null;\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.el-upload {\r\n  border: 1px dashed #6b6b6b;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n  border: 2px dashed #6b6b6b;\r\n}\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n.avatar {\r\n  border: 1px dashed #6b6b6b;\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateArticle.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CreateArticle.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CreateArticle.vue?vue&type=template&id=620ec780&scoped=true&\"\nimport script from \"./CreateArticle.vue?vue&type=script&lang=js&\"\nexport * from \"./CreateArticle.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CreateArticle.vue?vue&type=style&index=0&id=620ec780&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"620ec780\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}