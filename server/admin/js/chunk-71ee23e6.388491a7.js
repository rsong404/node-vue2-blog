(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-71ee23e6"],{"2a9c":function(t,e,a){},4116:function(t,e,a){"use strict";a("2a9c")},f7ac:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-form",{ref:"form",attrs:{model:t.form,size:"medium","label-width":"auto"}},[a("el-form-item",{attrs:{label:"文章标题"}},[a("el-col",{attrs:{span:12}},[a("el-input",{attrs:{width:"100px"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1)],1),a("el-form-item",{attrs:{label:"作者姓名"}},[a("el-col",{attrs:{span:12}},[a("el-input",{model:{value:t.form.userName,callback:function(e){t.$set(t.form,"userName",e)},expression:"form.userName"}})],1)],1),a("el-form-item",{attrs:{label:"分类"}},[a("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.form.cateName,callback:function(e){t.$set(t.form,"cateName",e)},expression:"form.cateName"}},t._l(this.categoryData,(function(t){return a("el-option",{key:t._id,attrs:{label:t.cateName,value:t.cateName}})})),1)],1),a("el-form-item",{attrs:{label:"添加标签"}},[a("el-select",{attrs:{multiple:"",filterable:"","allow-create":"",placeholder:"输入标签并选中"},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1),a("el-form-item",{attrs:{label:"文章封面图"}},[a("el-col",{attrs:{span:12}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://kkan.top/admin/api/upload","list-type":"picture",headers:t.headers,"on-success":t.SuccessUpload}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1)],1),a("el-form-item",{attrs:{label:"置顶数"}},[a("el-col",{attrs:{span:12}},[a("el-input-number",{attrs:{min:0,max:10,label:"数字越大级别越高"},model:{value:t.form.stick,callback:function(e){t.$set(t.form,"stick",e)},expression:"form.stick"}})],1)],1),a("el-form-item",{attrs:{label:"文章内容"}},[a("div",{attrs:{id:"editor"}})]),a("el-form-item",[a("button",{attrs:{id:"button"},on:{click:function(e){return e.preventDefault(),t.OnSubmit.apply(null,arguments)}}},[t._v("立即创建")])])],1)],1)},o=[],n=a("1da1"),i=(a("96cf"),a("6fad")),s=a.n(i),l=a("1487"),c=a.n(l),u={inject:["reload"],data:function(){return{headers:{Authorization:""},imageUrl:"",categoryData:[],tagValue:[],editor:null,form:{title:"",userName:"",cateName:"",stick:0,tags:[],coverPicture:"",contents:"",time:"default"}}},methods:{GetCateData:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/category");case 2:a=e.sent,t.categoryData=a.data.reverse();case 4:case"end":return e.stop()}}),e)})))()},OnSubmit:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.if_obj_is_null(t.form)){e.next=11;break}for(a=[],r=0;r<t.form.tags.length;r++)a.push({tagName:t.form.tags[r]});return e.next=5,t.$http.post("/tag",a);case 5:return e.next=7,t.$http.post("/article",t.form);case 7:t.$message.success("文章发表成功！"),t.$router.push("/articleList"),e.next=12;break;case 11:t.$message.error("表格不能为空，请检查！");case 12:case"end":return e.stop()}}),e)})))()},getEditorData:function(){this.editor.txt.html()},if_obj_is_null:function(t){var e=0;for(var a in t)t.hasOwnProperty(a)&&"coverPicture"!==a&&(null!==t[a]&&""!==t[a]||e++);return e},SuccessUpload:function(t){this.imageUrl=t,this.form.coverPicture=t}},created:function(){this.GetCateData(),this.headers.Authorization=window.localStorage.token},mounted:function(){var t=this,e=new s.a("#editor");e.highlight=c.a,e.config.zIndex=0,e.config.onchangeTimeout=700,e.create(),e.config.onchange=function(e){t.form.contents=e},this.editor=e},beforeDestroy:function(){this.editor.destroy(),this.editor=null}},m=u,f=(a("4116"),a("2877")),d=Object(f["a"])(m,r,o,!1,null,"01616524",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-71ee23e6.388491a7.js.map