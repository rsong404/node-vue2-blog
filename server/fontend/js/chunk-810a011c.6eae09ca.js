(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-810a011c"],{"5ce5":function(e,t,r){},"8e2a":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"messageBox"}},[r("div",{attrs:{id:"messageContainer"}},[r("div",{attrs:{id:"message"}},[r("div",{attrs:{id:"header"}},[r("div",{attrs:{id:"avatar"}}),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.nick,expression:"form.nick",modifiers:{trim:!0}}],staticClass:"nick",attrs:{type:"text",placeholder:" æ˜µç§°ï¼ˆå¿…å¡«ï¼‰"},domProps:{value:e.form.nick},on:{input:function(t){t.target.composing||e.$set(e.form,"nick",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:e.form.email,expression:"form.email",modifiers:{trim:!0}}],staticClass:"nick",attrs:{type:"text",placeholder:" é‚®ç®±ï¼ˆé€‰å¡«ï¼‰"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}})]),r("textarea",{ref:"textarea",attrs:{id:"textarea",placeholder:" è¯·è¾“å…¥è¾“å…¥ç•™è¨€"}})]),r("div",{attrs:{id:"foot"}},[r("div",{staticClass:"iconfont icon-zhayan",attrs:{id:"emoji"},on:{"!click":function(t){return t.stopPropagation(),e.AddEmoji.apply(null,arguments)}}}),r("div",{attrs:{id:"submitButton"}},[r("button",{ref:"center",attrs:{type:"primary",size:"medium"},on:{click:e.OnSubmit}},[e._v(" å‘è¡¨è¯„è®º ")])]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.emojiTurn,expression:"emojiTurn"}],attrs:{id:"emojiArr"}},e._l(e.emoji,(function(t,s){return r("span",{key:s,on:{click:function(r){return r.stopPropagation(),e.InsertEmoji(t)}}},[e._v(e._s(t))])})),0),r("div",{ref:"prompt",attrs:{id:"messagePrompt"}},[e._v(e._s(e.messagePrompt))])])]),e.isRefresh?r("div",{attrs:{id:"messageListContainer"}},[r("div",[e._v("å…¨éƒ¨è¯„è®º "+e._s(e.messageList.length)+" æ¡")]),e._l(e.messageList,(function(t){return r("div",{key:t._id,attrs:{id:"messageItem"}},[r("div",{attrs:{id:"messageAvatar"}},[r("img",{attrs:{src:t.avatar}})]),r("div",{attrs:{id:"messageItemContent"}},[r("div",{attrs:{id:"messageItemHeader"}},[r("div",[e._v(e._s(t.nick))]),r("div",[e._v(e._s(t.time))])]),r("div",{attrs:{id:"messageContent"}},[e._v(" "+e._s(t.content)+" ")]),t.reply?r("div",e._l(t.reply,(function(t){return r("div",{key:t._id,attrs:{id:"replyItem"}},[e._m(0,!0),r("div",{attrs:{id:"messageItemContent"}},[r("div",{attrs:{id:"messageItemHeader"}},[r("div",[e._v(e._s(t.nick))]),r("div",[e._v(e._s(t.time))])]),r("div",{attrs:{id:"messageContent"}},[e._v(" "+e._s(t.content)+" ")])])])})),0):e._e()])])}))],2):e._e()])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"messageAvatar"}},[s("img",{attrs:{src:r("b640")}})])}],i=r("1da1"),n=(r("96cf"),r("ac1f"),r("5319"),r("99af"),r("fb6a"),r("498a"),r("00b4"),["ğŸ˜€","ğŸ™ƒ","ğŸ˜‰","ğŸ˜Š","ğŸ˜‡","ğŸ˜ƒ","ğŸ˜„","ğŸ˜","ğŸ˜†","ğŸ˜…","ğŸ¤£","ğŸ˜‚","ğŸ™‚","ğŸ˜•","ğŸ˜Ÿ","ğŸ™","ğŸ˜®","ğŸ˜¯","ğŸ˜²","ğŸ˜³","ğŸ¥º","ğŸ˜¦","ğŸ˜¨","ğŸ˜°","ğŸ˜¢","ğŸ˜­","ğŸ˜±","ğŸ˜–","ğŸ˜£","ğŸ˜¡","ğŸ˜ ","ğŸ¤¬","ğŸ˜«","ğŸ¥±","ğŸ˜©","ğŸ‘Œ","ğŸ¤","âœŒ","ğŸ¤","ğŸ¤Ÿ","ğŸ¤˜","ğŸ¤™","ğŸ‘ˆ","ğŸ‘‰","ğŸ‘†","ğŸ–•","ğŸ‘‡","â˜","ğŸ‘","ğŸ‘","âœŠ","ğŸ‘Š","ğŸ¤›","ğŸ¤œ","ğŸ‘","ğŸ™Œ","ğŸ‘","ğŸ¤²","ğŸ¤","ğŸ™","âœ"]),o={data:function(){return{emoji:n,emojiTurn:!1,form:{nick:"",avatar:"https://myvuepressblog-image.oss-cn-shenzhen.aliyuncs.com/avatar2.jpg",content:"",email:"",time:""},messageList:[],messagePrompt:"è¯„è®ºæˆåŠŸ",messagePromptTimer:null,isRefresh:!0}},computed:{textarea:function(){return this.$refs.textarea}},methods:{InsertEmoji:function(e){var t=this.textarea.selectionStart,r=this.textarea.selectionEnd;if(t!==r){var s=this.textarea.value,a=this.textarea.value.substring(t,r);this.textarea.value=s.replace(a,"")}var i=this.textarea.value;this.textarea.value="".concat(i.slice(0,t)).concat(e).concat(i.slice(t)),this.textarea.selectionStart=t+2,this.textarea.selectionEnd=this.textarea.selectionStart,this.textarea.focus()},RefreshMessage:function(){var e=this;this.isRefresh=!1,this.$nextTick((function(){e.isRefresh=!0}))},MessagePrompt:function(e,t,r){var s=this;this.messagePrompt=e,this.$refs.prompt.style.setProperty(t,r),clearTimeout(this.messagePromptTimer),this.$refs.prompt.classList.add("addPromptAnimation"),this.messagePromptTimer=setTimeout((function(){s.$refs.prompt.classList.remove("addPromptAnimation")}),1e3)},OnSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.form.content=e.$refs.textarea.value.trim(),""===e.form.nick||""===e.form.content){t.next=12;break}if(r=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,""===e.form.email||r.test(e.form.email)){t.next=6;break}return e.MessagePrompt("é‚®ç®±æ ¼å¼é”™è¯¯ï¼Œè¯·æ£€æŸ¥","--color","red"),t.abrupt("return");case 6:return t.next=8,e.$http.post("/message",e.form);case 8:s=t.sent,s.data&&(e.GetMessageList(),e.MessagePrompt("è¯„è®ºæˆåŠŸ","--color","skyblue"),e.$refs.textarea.value="",e.form.nick=""),t.next=13;break;case 12:e.MessagePrompt("è¡¨æ ¼ä¸èƒ½ä¸ºç©ºï¼Œè¯·æ£€æŸ¥","--color","red");case 13:case"end":return t.stop()}}),t)})))()},AddEmoji:function(){this.emojiTurn=!this.emojiTurn},KeyDown:function(e){var t=e||window.event,r=t.which||t.keyCode||t.charCode;13==r&&this.OnSubmit()},GetMessageList:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("/message");case 2:r=t.sent,e.messageList=r.data.reverse();case 4:case"end":return t.stop()}}),t)})))()}},mounted:function(){this.$store.dispatch("bulletin","æœ‰é—®é¢˜æ¬¢è¿ç•™è¨€ã€‚"),document.addEventListener("keydown",this.KeyDown),this.GetMessageList()},beforeDestroy:function(){document.removeEventListener("keydown",this.KeyDown)}},m=o,c=(r("de91"),r("2877")),u=Object(c["a"])(m,s,a,!1,null,"2e4987b6",null);t["default"]=u.exports},de91:function(e,t,r){"use strict";r("5ce5")}}]);
//# sourceMappingURL=chunk-810a011c.6eae09ca.js.map